<Window x:Class="AgroCulture.Views.BookingEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Редактировать бронирование"
        Width="600" Height="550"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">

    <Window.Resources>
        <DropShadowEffect x:Key="WindowShadow" 
                         BlurRadius="20" 
                         ShadowDepth="5" 
                         Opacity="0.3"/>
    </Window.Resources>

    <Border CornerRadius="12" Background="White">
        <Border.Effect>
            <StaticResource ResourceKey="WindowShadow"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- HEADER -->
            <Border Grid.Row="0" CornerRadius="12,12,0,0" Padding="24,16">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
                        <GradientStop Color="#15803D" Offset="0"/>
                        <GradientStop Color="#16A34A" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>

                <Grid>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                        <materialDesign:PackIcon Kind="CalendarEdit" 
                                                Width="24" Height="24" 
                                                Foreground="White" VerticalAlignment="Center"/>
                        <TextBlock Text="Редактировать бронирование" 
                                  FontSize="20" FontWeight="Medium"
                                  Foreground="White" Margin="12,0,0,0" 
                                  VerticalAlignment="Center"/>
                    </StackPanel>

                    <Button HorizontalAlignment="Right" 
                           Style="{StaticResource MaterialDesignFlatButton}"
                           Click="BtnClose_Click"
                           Width="32" Height="32" Padding="0">
                        <materialDesign:PackIcon Kind="Close" 
                                                Width="20" Height="20" 
                                                Foreground="White"/>
                    </Button>
                </Grid>
            </Border>

            <!-- CONTENT -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="24,16">
                <StackPanel>
                    <!-- Информация о домике -->
                    <Border Background="#F0FDF4" BorderBrush="#86EFAC" BorderThickness="1"
                           CornerRadius="8" Padding="16" Margin="0,0,0,16">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <materialDesign:PackIcon Kind="Home" Width="20" Height="20" 
                                                        Foreground="#15803D" VerticalAlignment="Center"/>
                                <TextBlock Text="Домик" FontSize="14" FontWeight="Medium"
                                          Foreground="#15803D" Margin="8,0,0,0"/>
                            </StackPanel>
                            <TextBlock x:Name="TxtCabinName" Text="Домик &quot;Березка&quot;" 
                                      FontSize="18" FontWeight="SemiBold"
                                      Foreground="#15803D"/>
                            <TextBlock x:Name="TxtCabinDetails" 
                                      Text="Вместимость: 4 чел. • Цена: 3500 ₽/ночь"
                                      FontSize="12" Foreground="#16A34A" Margin="0,4,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Имя гостя -->
                    <StackPanel Margin="0,0,0,16">
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <materialDesign:PackIcon Kind="Account" Width="16" Height="16" 
                                                    Foreground="#6B7280" VerticalAlignment="Center"/>
                            <TextBlock Text="Имя гостя" FontSize="14" Foreground="#6B7280" Margin="8,0,0,0"/>
                            <TextBlock Text=" *" Foreground="#EF4444" FontSize="14"/>
                        </StackPanel>

                        <TextBox x:Name="TxtGuestName" 
                                Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                materialDesign:HintAssist.Hint="Иванов Иван Иванович"
                                Height="56"
                                Padding="12,0"
                                VerticalContentAlignment="Center"/>
                    </StackPanel>

                    <!-- Телефон -->
                    <StackPanel Margin="0,0,0,16">
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <materialDesign:PackIcon Kind="Phone" Width="16" Height="16" 
                                                    Foreground="#6B7280" VerticalAlignment="Center"/>
                            <TextBlock Text="Телефон" FontSize="14" Foreground="#6B7280" Margin="8,0,0,0"/>
                            <TextBlock Text=" *" Foreground="#EF4444" FontSize="14"/>
                        </StackPanel>

                        <TextBox x:Name="TxtGuestPhone" 
                                Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                materialDesign:HintAssist.Hint="+7 (999) 123-45-67"
                                Height="56"
                                Padding="12,0"
                                VerticalContentAlignment="Center"/>
                    </StackPanel>

                    <!-- Даты -->
                    <Grid Margin="0,0,0,16">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="16"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <materialDesign:PackIcon Kind="CalendarArrowRight" Width="16" Height="16" 
                                                        Foreground="#6B7280" VerticalAlignment="Center"/>
                                <TextBlock Text="Дата заезда" FontSize="14" Foreground="#6B7280" Margin="8,0,0,0"/>
                                <TextBlock Text=" *" Foreground="#EF4444" FontSize="14"/>
                            </StackPanel>

                            <DatePicker x:Name="DateCheckIn" 
                                       Style="{StaticResource MaterialDesignOutlinedDatePicker}"
                                       materialDesign:HintAssist.Hint="Выберите дату"
                                       Height="56"
                                       SelectedDateChanged="Date_SelectedDateChanged"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <materialDesign:PackIcon Kind="CalendarArrowLeft" Width="16" Height="16" 
                                                        Foreground="#6B7280" VerticalAlignment="Center"/>
                                <TextBlock Text="Дата выезда" FontSize="14" Foreground="#6B7280" Margin="8,0,0,0"/>
                                <TextBlock Text=" *" Foreground="#EF4444" FontSize="14"/>
                            </StackPanel>

                            <DatePicker x:Name="DateCheckOut" 
                                       Style="{StaticResource MaterialDesignOutlinedDatePicker}"
                                       materialDesign:HintAssist.Hint="Выберите дату"
                                       Height="56"
                                       SelectedDateChanged="Date_SelectedDateChanged"/>
                        </StackPanel>
                    </Grid>

                    <!-- Статус -->
                    <StackPanel Margin="0,0,0,16">
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <materialDesign:PackIcon Kind="CheckCircle" Width="16" Height="16" 
                                                    Foreground="#6B7280" VerticalAlignment="Center"/>
                            <TextBlock Text="Статус" FontSize="14" Foreground="#6B7280" Margin="8,0,0,0"/>
                            <TextBlock Text=" *" Foreground="#EF4444" FontSize="14"/>
                        </StackPanel>

                        <ComboBox x:Name="CmbStatus" 
                                 Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                 materialDesign:HintAssist.Hint="Выберите статус"
                                 Height="56">
                            <ComboBoxItem Content="Активно" Tag="active"/>
                            <ComboBoxItem Content="Завершено" Tag="completed"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- Итоги -->
                    <Border Background="#F9FAFB" BorderBrush="#E5E7EB" BorderThickness="1"
                           CornerRadius="8" Padding="16">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Количество ночей" FontSize="12" Foreground="#6B7280"/>
                                <TextBlock x:Name="TxtNights" Text="0 ночей" 
                                          FontSize="20" FontWeight="SemiBold"
                                          Foreground="#15803D" Margin="0,4,0,0"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                                <TextBlock Text="Итоговая стоимость" FontSize="12" 
                                          Foreground="#6B7280" TextAlignment="Right"/>
                                <TextBlock x:Name="TxtTotalPrice" Text="0 ₽" 
                                          FontSize="24" FontWeight="Bold"
                                          Foreground="#15803D" Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- FOOTER -->
            <Border Grid.Row="2" BorderBrush="#E5E7EB" BorderThickness="0,1,0,0" 
                   Padding="24,16" Background="#F9FAFB">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="12"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="0" Click="BtnCancel_Click"
                           Style="{StaticResource MaterialDesignOutlinedButton}"
                           Height="44">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Close" Width="18" Height="18" Margin="0,0,8,0"/>
                            <TextBlock Text="Отмена"/>
                        </StackPanel>
                    </Button>

                    <Button Grid.Column="2" Click="BtnSave_Click"
                           Style="{StaticResource MaterialDesignRaisedButton}"
                           Height="44">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
                                <GradientStop Color="#15803D" Offset="0"/>
                                <GradientStop Color="#16A34A" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>

                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ContentSave" Width="18" Height="18" Margin="0,0,8,0"/>
                            <TextBlock Text="Сохранить"/>
                        </StackPanel>
                    </Button>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
