<Window x:Class="AgroCulture.Views.BookingEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Редактировать бронирование"
        Width="620" Height="Auto"
        MaxHeight="800"
        SizeToContent="Height"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        UseLayoutRounding="True"
        SnapsToDevicePixels="True"
        TextOptions.TextFormattingMode="Display"
        TextOptions.TextRenderingMode="ClearType"
        RenderOptions.BitmapScalingMode="HighQuality">

    <Window.Resources>
        <DropShadowEffect x:Key="WindowShadow" 
                         BlurRadius="20" 
                         ShadowDepth="5" 
                         Opacity="0.3"
                         RenderingBias="Performance"/>
    </Window.Resources>

    <Border CornerRadius="12" Background="White">
        <Border.Effect>
            <StaticResource ResourceKey="WindowShadow"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- HEADER -->
            <Border Grid.Row="0" CornerRadius="12,12,0,0" Padding="24,18">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
                        <GradientStop Color="#15803D" Offset="0"/>
                        <GradientStop Color="#16A34A" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>

                <Grid>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                        <materialDesign:PackIcon Kind="CalendarEdit" 
                                                Width="24" Height="24" 
                                                Foreground="White" VerticalAlignment="Center"/>
                        <TextBlock Text="Редактировать бронирование" 
                                  FontSize="20" FontWeight="SemiBold"
                                  Foreground="White" Margin="12,0,0,0" 
                                  VerticalAlignment="Center"/>
                    </StackPanel>

                    <Button HorizontalAlignment="Right" 
                           Style="{StaticResource MaterialDesignFlatButton}"
                           Click="BtnClose_Click"
                           Width="32" Height="32" Padding="0">
                        <materialDesign:PackIcon Kind="Close" 
                                                Width="20" Height="20" 
                                                Foreground="White"/>
                    </Button>
                </Grid>
            </Border>

            <!-- CONTENT (ScrollViewer + Margin) -->
            <ScrollViewer Grid.Row="1" 
                         VerticalScrollBarVisibility="Auto"
                         MaxHeight="600">
                <StackPanel Margin="32,24,32,24">

                    <!-- Информация о домике -->
                    <Border Background="#ECFDF5" BorderBrush="#10B981" BorderThickness="2"
                           CornerRadius="10" Padding="18" Margin="0,0,0,24">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                <materialDesign:PackIcon Kind="HomeVariant" Width="22" Height="22" 
                                                        Foreground="#15803D" VerticalAlignment="Center"/>
                                <TextBlock Text="Информация о домике" FontSize="15" FontWeight="SemiBold"
                                          Foreground="#15803D" Margin="10,0,0,0" VerticalAlignment="Center"/>
                            </StackPanel>

                            <TextBlock x:Name="TxtCabinName" Text="Домик &quot;Березка&quot;" 
                                      FontSize="20" FontWeight="Bold"
                                      Foreground="#065F46" Margin="0,0,0,12"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="12"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Цена -->
                                <Border Grid.Column="0" Background="#D1FAE5" CornerRadius="6" Padding="12,7">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="CurrencyRub" Width="16" Height="16" 
                                                                Foreground="#059669" VerticalAlignment="Center"/>
                                        <TextBlock x:Name="TxtCabinPrice" Text="3500 ₽/ночь" 
                                                  FontSize="14" FontWeight="SemiBold"
                                                  Foreground="#059669" Margin="6,0,0,0" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Border>

                                <!-- Вместимость -->
                                <Border Grid.Column="2" Background="#D1FAE5" CornerRadius="6" Padding="12,7">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="AccountMultiple" Width="16" Height="16" 
                                                                Foreground="#059669" VerticalAlignment="Center"/>
                                        <TextBlock x:Name="TxtCabinCapacity" Text="До 4 чел." 
                                                  FontSize="14" FontWeight="SemiBold"
                                                  Foreground="#059669" Margin="6,0,0,0" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Имя гостя -->
                    <StackPanel Margin="0,0,0,18">
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <materialDesign:PackIcon Kind="Account" Width="16" Height="16" 
                                                    Foreground="#6B7280" VerticalAlignment="Center"/>
                            <TextBlock Text="Имя гостя" FontSize="14" FontWeight="Medium"
                                      Foreground="#6B7280" Margin="8,0,0,0"/>
                            <TextBlock Text=" *" Foreground="#EF4444" FontSize="14"/>
                        </StackPanel>

                        <TextBox x:Name="TxtGuestName" 
                                Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                materialDesign:HintAssist.Hint="Иванов Иван Иванович"
                                Height="56"
                                Padding="14,0"
                                FontSize="14"
                                VerticalContentAlignment="Center"/>
                    </StackPanel>

                    <!-- Телефон -->
                    <StackPanel Margin="0,0,0,24">
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <materialDesign:PackIcon Kind="Phone" Width="16" Height="16" 
                                                    Foreground="#6B7280" VerticalAlignment="Center"/>
                            <TextBlock Text="Телефон" FontSize="14" FontWeight="Medium"
                                      Foreground="#6B7280" Margin="8,0,0,0"/>
                            <TextBlock Text=" *" Foreground="#EF4444" FontSize="14"/>
                        </StackPanel>

                        <TextBox x:Name="TxtGuestPhone" 
                                Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                materialDesign:HintAssist.Hint="+7 (999) 123-45-67"
                                Height="56"
                                Padding="14,0"
                                FontSize="14"
                                VerticalContentAlignment="Center"/>
                    </StackPanel>

                    <!-- Даты -->
                    <Grid Margin="0,0,0,18">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="16"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Дата заезда -->
                        <StackPanel Grid.Column="0">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <materialDesign:PackIcon Kind="CalendarArrowRight" Width="16" Height="16" 
                                                        Foreground="#6B7280" VerticalAlignment="Center"/>
                                <TextBlock Text="Дата заезда" FontSize="14" FontWeight="Medium"
                                          Foreground="#6B7280" Margin="8,0,0,0"/>
                                <TextBlock Text=" *" Foreground="#EF4444" FontSize="14"/>
                            </StackPanel>

                            <DatePicker x:Name="DateCheckIn" 
                                       Style="{StaticResource MaterialDesignOutlinedDatePicker}"
                                       materialDesign:HintAssist.Hint="Выберите дату"
                                       Height="56"
                                       FontSize="14"
                                       SelectedDateChanged="Date_SelectedDateChanged"/>
                        </StackPanel>

                        <!-- Дата выезда -->
                        <StackPanel Grid.Column="2">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <materialDesign:PackIcon Kind="CalendarArrowLeft" Width="16" Height="16" 
                                                        Foreground="#6B7280" VerticalAlignment="Center"/>
                                <TextBlock Text="Дата выезда" FontSize="14" FontWeight="Medium"
                                          Foreground="#6B7280" Margin="8,0,0,0"/>
                                <TextBlock Text=" *" Foreground="#EF4444" FontSize="14"/>
                            </StackPanel>

                            <DatePicker x:Name="DateCheckOut" 
                                       Style="{StaticResource MaterialDesignOutlinedDatePicker}"
                                       materialDesign:HintAssist.Hint="Выберите дату"
                                       Height="56"
                                       FontSize="14"
                                       SelectedDateChanged="Date_SelectedDateChanged"/>
                        </StackPanel>
                    </Grid>

                    <!-- Статус -->
                    <StackPanel Margin="0,0,0,24">
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <materialDesign:PackIcon Kind="CheckCircle" Width="16" Height="16" 
                                                    Foreground="#6B7280" VerticalAlignment="Center"/>
                            <TextBlock Text="Статус" FontSize="14" FontWeight="Medium"
                                      Foreground="#6B7280" Margin="8,0,0,0"/>
                            <TextBlock Text=" *" Foreground="#EF4444" FontSize="14"/>
                        </StackPanel>

                        <ComboBox x:Name="CmbStatus" 
                                 Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                 materialDesign:HintAssist.Hint="Выберите статус"
                                 Height="56"
                                 FontSize="14">
                            <ComboBoxItem Content="Активно" Tag="active"/>
                            <ComboBoxItem Content="Завершено" Tag="completed"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- Итоговая стоимость -->
                    <Border Background="#FFFFFF" BorderBrush="#10B981" BorderThickness="2"
                           CornerRadius="10" Padding="20">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.12" Color="#10B981"/>
                        </Border.Effect>

                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="20"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Количество ночей -->
                            <StackPanel Grid.Row="0">
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <materialDesign:PackIcon Kind="Bed" Width="18" Height="18" 
                                                            Foreground="#6B7280" VerticalAlignment="Center"/>
                                    <TextBlock Text="Количество ночей" FontSize="13" FontWeight="Medium"
                                              Foreground="#6B7280" Margin="8,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>

                                <TextBlock x:Name="TxtNights" Text="0 ночей" 
                                          FontSize="24" FontWeight="Bold"
                                          Foreground="#15803D"/>
                            </StackPanel>

                            <!-- Разделитель -->
                            <Border Grid.Row="1" Height="1" Background="#E5E7EB" 
                                   VerticalAlignment="Center"/>

                            <!-- Итоговая стоимость -->
                            <StackPanel Grid.Row="2">
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <materialDesign:PackIcon Kind="CashMultiple" Width="18" Height="18" 
                                                            Foreground="#6B7280" VerticalAlignment="Center"/>
                                    <TextBlock Text="Итоговая стоимость" FontSize="13" FontWeight="Medium"
                                              Foreground="#6B7280" Margin="8,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>

                                <TextBlock x:Name="TxtTotalPrice" Text="0 ₽" 
                                          FontSize="30" FontWeight="Bold"
                                          Foreground="#15803D"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                </StackPanel>
            </ScrollViewer>

            <!-- FOOTER -->
            <Border Grid.Row="2" BorderBrush="#E5E7EB" BorderThickness="0,1,0,0" 
                   Padding="32,18" Background="#F9FAFB"
                   CornerRadius="0,0,12,12">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="14"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Кнопка Отмена -->
                    <Button Grid.Column="0" Click="BtnCancel_Click"
                           Style="{StaticResource MaterialDesignOutlinedButton}"
                           Height="46"
                           FontSize="14"
                           FontWeight="Medium">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Close" Width="18" Height="18" 
                                                    Margin="0,0,8,0" VerticalAlignment="Center"/>
                            <TextBlock Text="Отмена" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <!-- Кнопка Сохранить -->
                    <Button Grid.Column="2" Click="BtnSave_Click"
                           Style="{StaticResource MaterialDesignRaisedButton}"
                           Height="46"
                           FontSize="14"
                           FontWeight="Medium">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
                                <GradientStop Color="#15803D" Offset="0"/>
                                <GradientStop Color="#16A34A" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>

                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ContentSave" Width="18" Height="18" 
                                                    Margin="0,0,8,0" VerticalAlignment="Center"/>
                            <TextBlock Text="Сохранить" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>